<!DOCTYPE HTML>
<!--[if IE 6]>
<html id="ie6" lang="en-US" class="ie ie6 lt-ie9">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US" class="ie ie7 lt-ie9">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US" class="ie ie8 lt-ie9">
<![endif]-->
<!--[if gte IE 9]>
<html lang="en-US" class="ie ie9">
<![endif]-->
<!--[if !(IE)]><!-->
<html lang="en-US" class="">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="author" content="vitorarins">

	<title>Node.js</title>
	<link rel="stylesheet" href="assets/css/reset.css">
	<link rel="stylesheet" href="css/flowtime.css">
	<link rel="stylesheet" href="css/themes/default.css">
	<link rel="stylesheet" href="assets/css/prism.css">
</head>
<body class="">

<div class="flowtime">
	<div class="ft-section" data-id="section-1">
		<div id="/section-1/page-1" class="ft-page" data-id="page-1" data-title="Javascript no Backend">
			<div class="stack-center">
				<div class="stacked-center">
					<a href="javascript:Flowtime.next();">
						<img src="assets/img/oyster-registry.png">
					</a>
					<p class="page-title">Docker Registry</p>
					<p>Por: <strong><a href="https://github.com/vitorarins">Vitor Arins</a></strong></div>
			</div>
		</div>
	</div>
	<div class="ft-section" data-id="section-2">
		<div id="/section-2/page-1" class="ft-page" data-id="page-2">
			<h1>Roteiro</h1>
			<ul>
				<li>O que é o Registry?</li>
				<li>Imagem VS Container.</li>
				<li>Necessidade de manter imagens privadas.</li>
				<li>Dificuldades na instalação.</li>
				<li>Alternativas</li>
				<li>Portus</li>
				<li>Configuração do Portus</li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-3">
		<div id="/section-3/page-1" class="ft-page" data-id="page-3">
			<h1>O que é o Registry?</h1>
			<div class="stack-center">
				<div class="stacked-center">
				</div>
			</div>
		</div>
		<div id="/section-3/page-2" class="ft-page" data-id="page-3">
			<h1>O que é o Registry?</h1>
			<ul>
				<p>Uma aplicação <strong>open-source</strong> dedicada a armazenar e distribuir imagens de Docker.</p>
				<p>Alguns conceitos chave:</p>
				<li>Não armazena estado.</li>
				<li>Altamente escalável.</li>
				<li>Funciona através de API REST.</li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-4">
		<div id="/section-4/page-1" class="ft-page" data-id="page-4">
			<h1>Imagem VS Container</h1>
			<div class="stack-center">
				<img width="458" height="434" class="stacked-center" src="assets/img/docker-image-vs-container.png"/>
			</div>
		</div>
		<div id="/section-4/page-2" class="ft-page" data-id="page-4">
			<h1>Imagem</h1>
			<ul>
				<li>Arquivo imutável.</li>
				<li>Criadas com o comando <strong>build</strong>.</li>
				<li>Armazenadas em um Docker Registry.</li>
				<li>Compostas de camadas de outras imagens.</li>
				<li>Produzem um container a partir do comando <strong>run</strong>.</li>
				<li>Essencialmente é um <em>snapshot</em> de um container.</li>
			</ul>
		</div>
		<div id="/section-4/page-3" class="ft-page" data-id="page-4">
			<h1>Imagem</h1>
			<p>Podem ser listadas com o comando <strong>docker images</strong>:</p>
			<p>
			<pre><code class="language-javascript">$ docker images</code></pre>
			</p>
			<p>
			<pre><code class="language-javascript">
			REPOSITORY             TAG                 IMAGE ID             CREATED             VIRTUAL SIZE

			registry              latest              34a912ef9c03         3 days ago            423.3 MB
			node                  latest              4797dc6f7a9c         9 weeks ago           711.8 MB
			nginx                 latest              a785ba7493fd        11 weeks ago           132.9 MB
			mongo                 latest              077c6501ee18        12 weeks ago           257.8 MB
			ubuntu                14.04               99ec81b80c55        2 months ago           266 MB
		</code></pre>
			</p>
		</div>
		<div id="/section-4/page-4" class="ft-page" data-id="page-4">
			<h1>Container</h1>
			<ul>
				<li>Objeto executável.</li>
				<li>Encapsulação portável e leve.</li>
				<li>Ambiente controlado para rodar aplicações.</li>
				<li>Analogia: Imagem é a classe e container é a instancia.</li>
			</ul>
			<p>
				É possível listar os containers em execução com o comando <strong>docker ps</strong>:
			</p>
			<p>
			<pre><code class="language-javascript">$ docker ps</code></pre>
			</p>
			<p>
				<pre><code class="language-javascript">
	CONTAINER ID     IMAGE           COMMAND      CREATED            STATUS               PORTS     NAMES

	d955ec7a3dad    mongo:latest   "/bin/echo"   3 weeks ago   Exited (0) 3 weeks ago     27017   elegant_turing
				</code></pre>
			</p>
		</div>
	</div>
	<div class="ft-section" data-id="section-5">
		<div id="/section-5/page-1" class="ft-page" data-id="page-5">
			<h1>Necessidade de manter imagens privadas</h1>
			<ul>
				<li>Clientes que exigem nível de segurança diferenciado.</li>
				<li>Armazenamento de arquivos e informações sigilosas dentro de uma imagem.</li>
				<li>Diminuir o tempo de envio e recuperação das imagens (ambiente interno).</li>
				<li></li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-6">
		<div id="/section-6/page-1" class="ft-page" data-id="page-6">
			<h1>Teoria: <em>Loops</em> de evento</h1>
			<p class="event_loop"><em>Loops</em> de evento são o principal elemento da programação orientada a eventos, quase todos os programas que necessitam de interface ao usuário usam loops de evento para gerenciar eventos do usuário, por exemplo: Clicks, requisições AJAX, etc..</p>
		</div>
	</div>
	<div class="ft-section" data-id="section-7">
		<div id="/section-7/page-1" class="ft-page" data-id="page-7">
			<h3>Teoria: <em>Loops</em> de evento</h3>
			<div class="stack-center">
				<img class="stacked-center" src="assets/img/loop_eventos.png"/>
			</div>
		</div>
	</div>
	<div class="ft-section" data-id="section-8">
		<div id="/section-8/page-1" class="ft-page" data-id="page-8">
			<h3>Teoria: Pilha de execução Node.js</h3>
			<div class="stack-center">
				<img class="stacked-center" src="assets/img/pilha_execucao_node.png"/>
			</div>
		</div>
	</div>
	<div class="ft-section" data-id="section-9">
		<div id="/section-9/page-1" class="ft-page" data-id="page-9">
			<h1>E/S Não bloqueante</h1>
			<p>E/S Tradicional:</p>
				<pre><code class="language-javascript">
					var result = db.query(“select x from table_y”);
					fazerAlgoCom(result); // esperar por resultados
					fazerAlgoSemResult(); // execução bloqueada!
				</code></pre>
			<p>E/S Não bloqueante:</p>
				<pre><code class="language-javascript">
					db.query(“select x from table_y”, function (result) {
					fazerAlgoCom(result); //esperar por resultados });
					fazerAlgoSemResult(); // execução sem espera!
				</code></pre>
		</div>
	</div>
	<div class="ft-section" data-id="section-10">
		<div id="/section-10/page-1" class="ft-page" data-id="page-10">
			<h1>Possibilidades do Node.js</h1>
			<ul>
				<li><p>Criar servidor HTTP e exibir <q>Hello World</q> no navegador em apenas 4 linhas de Javascript</p></li>
				<li><p>Criar servidor TCP similar ao HTTP em apenas 4 linhas de Javascript</p></li>
				<li><p>Criar servidor DNS</p></li>
				<li><p>Criar servidor de arquivos estáticos</p></li>
				<li><p>Criar aplicação de Web Chat como Hangouts no navegador</p></li>
				<li><p>Também pode ser usado para criar jogos online, ferramentas de colaboração e qualquer aplicação que necessite enviar atualizações ao usuário em tempo real</p></li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-11">
		<div id="/section-11/page-1" class="ft-page" data-id="page-1">
			<h1>Exemplo 2: Servidor HTTP</h1>
			<p>Neste exemplo estamos criando um servidor que apenas exibe as palavras <q>Hello World</q> em texto pleno. O servidor será iniciado em <strong>localhost</strong> na porta <strong>5000</strong></p>
			<p><pre><code class="language-javascript">
			var http = require(‘http’);
			http.createServer( function (req, res) {
			res.writeHead(200, {‘Content-Type’: ‘text/plain’});
			res.end(‘Hello World\n’);
			}).
			listen(5000, “127.0.0.1”);
		</code></pre></p>
		</div>
	</div>
	<div class="ft-section" data-id="section-12">
		<div id="/section-12/page-1" class="ft-page" data-id="page-2">
			<h1>Exemplo 3: Servidor TCP</h1>
			<p>Neste exemplo estamos criando um servidor que apenas recebe texto do servidor e o exibe no navegador em texto pleno. O servidor será iniciado em <strong>localhost</strong> na porta <strong>6000</strong></p>
			<p><pre><code class="language-javascript">
			var net = require(‘net’);
			net.createServer( function (socket) {
			socket.write(“Echo servidor\r\n”);
			socket.pipe(socket);
			})
			.listen(6000, “127.0.0.1”);
		</code></pre></p>
		</div>
	</div>
	<div class="ft-section" data-id="section-13">
		<div id="/section-13/page-1" class="ft-page" data-id="page-3">
			<h1>Ecosistema Node.js</h1>
			<p>Node.js frequentemente depende de seus <strong>módulos</strong>, nos exemplos anteriores,
				a palavra-chave <strong>require</strong> foi usada para carregar os módulos <em>http</em> & <em>net</em>.</p>
			<p>Para criar <strong>módulos</strong>, é preciso colocar o código Javascript em um arquivo
				<strong>‘.js’</strong> separado e incluir em seu código usando a palavra-chave <strong>require</strong> da seguinte maneira:
			</p>
			<p><pre><code class="language-javascript">var modulox = require(‘./modulox’);  // carrega o arquivo modulox.js como módulo</code></pre></p>
		</div>
	</div>
	<div class="ft-section" data-id="section-14">
		<div id="/section-14/page-1" class="ft-page" data-id="page-4">
			<h1>NPM & pacotes</h1>
			<div class="stack">
				<p>Bibliotecas em Node.js são chamadas de <strong>pacotes (packages)</strong>, e podem ser instalados através do comando:</p>
				<p><pre><code class="language-javascript">npm install “nome_do_pacote”; // o pacote deve estar disponível no registry npm @ npmjs.org</code></pre></p>
				<p><strong>NPM</strong> (Node Package Manager) vem junto com a instalação do Node.js</p>
				<img src="assets/img/npm.png">
			</div>
		</div>
	</div>
	<div class="ft-section" data-id="section-15">
		<div id="/section-15/page-1" class="ft-page" data-id="page-5">
			<h1>Exemplo 4: Conectando com BD (MongoDB)</h1>
			<p>Instale <strong>mongojs</strong> usando npm, um <em>driver</em> MongoDB para Node.js:</p>
				<pre><code class="language-javascript">
					npm install mongojs
				</code></pre>
			<p>Código para recuperar todos os documentos de uma coleção:</p>
				<pre><code class="language-javascript">
					var db = require(“mongojs”)
					.connect(“localhost:27017/test”, [‘test’]);

					db.test.find({}, function(err, posts) {
					if (err || !posts) console.log(“No posts found”);
					posts.forEach( function(post) {
					console.log(post);
					});
					});
				</code></pre>
		</div>
	</div>
	<div class="ft-section" data-id="section-16">
		<div id="/section-16/page-1" class="ft-page" data-id="page-6">
			<h1>Quando se deve usar Node.js?</h1>
			<ul>
				<li><p>Node.js é bom para criar serviços em tempo real baseados em <strong><em>streaming</em></strong>, aplicações de web chat, servidores de arquivos estáticos, etc.</p></li>
				<li><p>Quando é necessário alto nível de concorrencia, sem se preocupar com ciclos de CPU</p></li>
				<li><p>Quando já se possui bastante código <strong>Javascript</strong>, assim é possível utilizar a mesma linguagem do lado do cliente e do servidor.</p></li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-17">
		<div id="/section-17/page-1" class="ft-page" data-id="page-7">
			<h3>Benchmarks Node.js</h3>
			<div class="stack-center"><img class="stacked-center" src="assets/img/benchmark_node.png"></div>
		</div>
	</div>
	<div class="ft-section" data-id="section-18">
		<div id="/section-18/page-1" class="ft-page" data-id="page-8">
			<h1>Quando não usar Node.js</h1>
			<ul>
				<li><p>Quando estiver fazendo operações pesadas e que consomem muita <strong>CPU</strong> no lado servidor, pois <em>loops</em> de eventos consomem muita CPU.</p></li>
				<li><p>Node.js não se compara a outros frameworks de aplicação a nível empresarial como <strong>Spring (Java)</strong>,
					<strong>Django (Python)</strong>, <strong>Symfony (PHP)</strong>, etc.. Aplicações escritas nessas plataformas são destinadas a ter
					alta interação com o usuário e envolvem uma lógica de negócio bem complexa.</p></li>
				<li><p>A API Node.js ainda está em <em>beta</em>, muda constantemente de uma revisão para outra e
					não é muito compatível com versões anteriores. A maioria dos pacotes são instáveis.
					Portanto não está pronto para ambiente de produção ainda.</p></li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-19">
		<div id="/section-19/page-1" class="ft-page" data-id="page-9">
			<h1>Empresas utilizando Node.js</h1>
			<div class="stack-center"><img class="stacked-center" src="assets/img/companies.png"></div>
		</div>
	</div>
	<div class="ft-section" data-id="section-20">
		<div id="/section-20/page-1" class="ft-page" data-id="page-10">
			<h1>Módulos importantes</h1>
			<dl>
				<dt><a href="http://expressjs.com/" target="_blank"><img src="assets/img/expressjs.png"/></a></dt>
				<dd>para facilitar as coisas (sintaxe, conexões em BDs)</dd>
				<dt><a href="http://jade-lang.com/" target="_blank"><img src="assets/img/jade.png"/></a></dt>
				<dd>sistema de template HTML</dd>
				<dt><a href="http://socket.io/" target="_blank"><img src="assets/img/socketio.png"/></a></dt>
				<dd>facilita criar aplicações tempo real com <strong>Websockets</strong></dd>
				<dt><a href="http://nodemon.io/" target="_blank"><img src="assets/img/nodemon.png"/></a></dt>
				<dd>para monitorar Node.js e enviar mudançãs automaticamente</dd>
				<dt><a href="http://coffeescript.org/" target="_blank"><img src="assets/img/coffeescript.png"/></a></dt>
				<dd>para facilitar desenvolvimento Javascript</dd>
			</dl>
		</div>
	</div>
	<div class="ft-section" data-id="section-21">
		<div id="/section-21/page-1" class="ft-page" data-id="page-11">
			<h1>Recursos para aprender mais</h1>
			<ul>
				<li><p>Vídeo no YouTube: <a href="https://youtu.be/jo_B4LTHi3I">youtu.be/jo_B4LTHi3I</a></p></li>
				<li><p>Visite o site <a href="http://nodejs.org">nodejs.org</a>.</p></li>
				<li><p>Assita tutoriais sobre Node.js em: <a href="http://nodetuts.com/">nodetuts.com</a></p></li>
				<li><p>Para mais informações sobre MongoDB: <a href="http://docs.mongodb.org/manual/">docs.mongodb.org/manual</a></p></li>
				<li><p>Comunidade em Florianópolis: <a href="http://nodeschool.io/florianopolis/">nodeschool.io/florianopolis</a></p></li>
			</ul>
		</div>
	</div>
	<div class="ft-section" data-id="section-22">
		<div id="/section-22/page-1" class="ft-page" data-id="page-12">
			<div class="stack-center">
				<div class="stacked-center">
					<h1>Apresentação feita com o Framework Javascript <a href="http://flowtime-js.marcolago.com/"><img class="stacked-center" src="assets/img/flowtimejs.png"/></a></h1>
					<h1>E controlada com o Framework Javascript <a href="http://controldeck.aws.af.cm/"><img class="stacked-center" src="assets/img/controldeck.jpg"/></a></h1>
				</div>
			</div>
		</div>
	</div>
	<div class="ft-section" data-id="section-23">
		<div id="/section-23/page-1" class="ft-page" data-id="page-13">
			<h1>Referências</h1>
			<ul>
				<li><a href="https://docs.docker.com/registry/">https://docs.docker.com/registry/</a></li>
				<li><a href="http://paislee.io/how-to-automate-docker-deployments/">http://paislee.io/how-to-automate-docker-deployments/</a></li>
			</ul>
		</div>
	</div>
</div>

<script src="js/brav1toolbox.js"></script>
<script src="js/flowtime.js"></script>
<script src="assets/js/prism.js"></script>

<!-- controldeck.js -->
<script src="/socket.io/socket.io.js"></script>
<script src="/controldeck-node.js"></script>

<script>
	// Configuration API test
	// Flowtime.showProgress(true);
	// Flowtime.fragmentsOnSide(true);
	// Flowtime.fragmentsOnBack(true);
	// Flowtime.useHistory(false);
	// Flowtime.slideInPx(true);
	// Flowtime.sectionsSlideToTop(true);
	// Flowtime.gridNavigation(false);
	// Flowtime.useOverviewVariant(true);
	Flowtime.parallaxInPx(true);
	//
	// event management
	var cacheTitle = document.title.replace("Flowtime.js | ", "");
	Flowtime.addEventListener("flowtimenavigation", onNavigation, false);

	var iosocket = io.connect();

	function onNavigation(e)
	{
		// console.log(cacheTitle + ' > ' + document.title.replace("Flowtime.js | ", ""));
		cacheTitle = document.title.replace("Flowtime.js | ", "");
		//console.log('section', e.section, 'sectionIndex', e.sectionIndex);
		//console.log('page', e.page, 'pageIndex', e.);
		//console.log('pastSectionIndex', e.pastSectionIndex, 'pastPageIndex', e.pastPageIndex);
		//console.log('prevSection', e.prevSection);
		//console.log('nextSection', e.nextSection);
		//console.log('prevPage', e.prevPage);
		//console.log('nextPage', e.nextPage);
		//console.log('fragment', e.fragment, + 'fragmentIndex', e.fragmentIndex);
		//console.log("isOverview", e.isOverview);
		//console.log('progress:', e.progress, 'total:', e.total);
		// var value = Math.round(e.progress * 100 / e.total);
		// console.log('Completion: ' + value + '%');

		iosocket.emit("navigate", { section: e.sectionIndex, page: e.pageIndex });
	}
	// starts the application with configuration options
	Flowtime.start();

	iosocket.emit("flowtime minimap complete", { dom: Flowtime.getDefaultProgress().innerHTML });
</script>
</body>
</html>